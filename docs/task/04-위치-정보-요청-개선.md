# 위치 정보 요청 개선 작업

## 작업 일자
2024년 (현재 날짜)

## 문제점
- 위치 정보 요청 시간 초과 시 지도가 전혀 표시되지 않음
- 사용자가 아무것도 볼 수 없는 상태가 됨
- 재시도 기능이 없음

## 해결 방법

### 1. 기본 위치 설정
- 위치 정보가 없어도 기본 위치(서울시청)로 지도 표시
- 사용자가 항상 지도를 볼 수 있도록 개선

### 2. 위치 정보 요청 개선
- 타임아웃 시간 10초 → 15초로 증가
- `enableHighAccuracy`를 `false`로 변경하여 빠른 응답
- `maximumAge`를 60초로 설정하여 캐시된 위치 사용 가능

### 3. 재시도 기능 추가
- `useGeolocation` 훅에 `retry` 함수 추가
- 위치 정보 요청 실패 시 사용자가 다시 시도할 수 있도록 버튼 제공

### 4. UI/UX 개선
- 위치 에러 발생 시에도 지도는 표시
- 상단에 알림 배너 표시 (닫기 가능)
- 알림에서 "위치 다시 요청" 버튼 제공

## 수정된 파일

### `lib/hooks/useGeolocation.ts`
- 재시도 기능 추가 (`retry` 함수 반환)
- 타임아웃 시간 증가 (15초)
- 위치 요청 옵션 최적화

### `app/page.tsx`
- 기본 위치 설정 로직 추가
- 위치 정보가 없어도 카페 로드하도록 수정
- 에러 알림 UI 추가 (닫기 기능 포함)
- 재시도 버튼 추가

## 개선 효과

1. ✅ 위치 정보 요청 실패 시에도 지도 표시
2. ✅ 사용자가 항상 서비스를 사용할 수 있음
3. ✅ 재시도 기능으로 사용자 편의성 향상
4. ✅ 명확한 에러 메시지 및 해결 방법 제시

## 테스트 시나리오

1. **위치 권한 거부 시**
   - 기본 위치로 지도 표시 확인
   - 알림 배너 표시 확인
   - 재시도 버튼 동작 확인

2. **위치 요청 타임아웃 시**
   - 기본 위치로 지도 표시 확인
   - 알림 배너 표시 확인
   - 재시도 버튼으로 다시 시도 가능 확인

3. **위치 정보 성공 시**
   - 현재 위치 기준으로 지도 표시 확인
   - 알림 배너 표시 안 됨 확인

## 완료 상태
✅ 위치 정보 요청 개선 완료

